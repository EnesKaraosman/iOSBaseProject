# Network Module Usage

Firstly make sure you don't forget setting your environment (baseUrl). 

AppDelegate is a good place to use.

```swift
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
        
    APIClient.instance.environment = NetworkEnvironment(
       baseUrl: "https://www.mybaseurl.com/"
    )

	return true
}
```

## Creating Request and Response Models.


* #### Request

```swift
import Alamofire
import ObjectMapper

public struct MySampleRequest: Request {
    
    var httpMethod: HTTPMethod = .get
    var endPoint: String = "myEndpoint/gonnaBeAwesome"
    typealias Response = ResponseModel
    
    public init() {}
    
    public init?(map: Map) {}
    
    public mutating func mapping(map: Map) { }
    
}
```

To create a request, you may confirm **Request** protocol.

You can view Request protocol in the project. It just have 3 parameters.

* httpMethod: HTTPMethod
* endPoint: String
* associatedtype: Response: Mappable

To create (generate) your Request (post methods) and Response models you can use tools like *SwiftyJSONAccelerator* or even online tools. 

You basically give your JSON to tool and it gives back to you autogenerated swift class model. (Including nested instances)

Lets create a model together.

Assume you have to send a JSON like this in POST request.

```json
{
	"customerKey": {
    	"custId": 22022163
    }
}
```
Copy this JSON to any tool you like to use. And let him generate codes like below.

```swift
import Foundation
import ObjectMapper

public final class CustomerKey: Mappable {

    private struct SerializationKeys {
        static let custId = "custId"
    }

    public var custId: Int?

    public required init?(map: Map) { }

    public func mapping(map: Map) {
        custId <- map[SerializationKeys.custId]
    }

}

///

// Then confirm Request protocol as mentioned earlier.
public final class MyRequestObject: Request {

    var httpMethod: HTTPMethod = .get
    var endPoint: String = "user/inquireReferCode"
    typealias Response = MyResponseObject 
    // Create same way you did for request 
    // of course do not confirm request protocol :)

    private struct SerializationKeys {
        static let customerKey = "customerKey"
    }

    public var customerKey: CustomerKey?

    public required init?(map: Map) { }

    public func mapping(map: Map) {
        customerKey <- map[SerializationKeys.customerKey]
    }

}
```

Okay so now lets see how we can execute Http Request

Use **APIClient** instance, required methods already implemented.

## Request Samples

* ##### GET

```swift
let request = MyRequestObject()
APIClient.instance.execute(
    request: request,
    success: { (myResponseObjectModel) in
        
    },
    failure: { error in
        // Handle error
    }
)
```

You don't need to create Request object for **GET** requests. 
You can just jump right into request.

```swift
APIClient.instance.executeGET(
	endPoint: "articles", 
    success: { (response) in
        // Custom parsing.
        let articles = Mapper<Article>().mapArray(JSONObject: response.arrayObject) ?? []
        // ..
    }, 
    failure: { error in
    	// Handle error
    })
```

* ##### POST

No difference from GET request, you can use 
```APIClient.instance.execute()``` 
method with any *Request* object, just make sure you set 
```httpMethod = .post``` 
in request that's it.

